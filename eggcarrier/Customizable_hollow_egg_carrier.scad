
// Copyright 2017 Arthur Davis (thingiverse.com/artdavis)
// This file is licensed under a Creative Commons Attribution 4.0
// International License.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
// DEALINGS IN THE SOFTWARE.

// Coupler Shoulder Length
coupler_shoulder_len = 6.0; // [1.0:1.0:25.0]
// Coupler Shoulder Diameter
coupler_shoulder_diam = 18.7; // [10.0:0.2:50.0]
// Fitting Shoulder Length
coupler_fitting_len = 12.0; // [5.0:1.0:25.0]
// Fitting Shoulder Diameter
coupler_fitting_diam = 17.9; // [10.0:0.2:50.0]

/* [Hidden] */
// Special variables for facets/arcs
$fn = 48;

// Incremental offset to make good overlap for CSG operations
delta = 0.1;

// Coupler extension to overlap with egg shell
coupler_extra = 50.0;

// Wall thickness of the fitting
wall_th = 2.0;


rotate(a = [0, 90.0000000000, 0]) {
	difference() {
		difference() {
			union() {
				rotate_extrude(convexity = 10) {
					polygon(paths = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52]], points = [[0.0000000000, 0.0000000000], [2.0180937500, 0.0247137500], [3.7258642500, 0.1327052500], [5.3019262500, 0.3512380000], [6.9091375000, 0.7075750000], [8.4426530000, 1.1710507500], [9.9402630000, 1.7523587500], [11.3926580000, 2.4408062500], [12.7905300000, 3.2257000000], [14.1024562500, 4.0940112500], [15.3505312500, 5.0578640000], [16.5348525000, 6.1013037500], [17.6555175000, 7.2083750000], [18.7284022500, 8.3941240000], [19.7306607500, 9.6438347500], [20.6563892500, 10.9511280000], [21.4996837500, 12.3096250000], [22.6616015000, 14.4644757500], [23.6934217500, 16.6895322500], [24.5890127500, 18.9727225000], [25.3422425000, 21.3019750000], [25.9407022500, 23.6671835000], [26.3893912500, 26.0696752500], [26.7027070000, 28.4952620000], [26.8950475000, 30.9297550000], [26.9592505000, 33.3534510000], [26.8918552500, 35.7801175000], [26.7103762500, 38.2024152500], [26.4323275000, 40.6130050000], [26.0585377500, 42.9943835000], [25.5808700000, 45.3592315000], [25.0089575000, 47.7037215000], [24.3524337500, 50.0240250000], [23.6296077500, 52.2890682500], [22.8256460000, 54.5286320000], [21.9300637500, 56.7320372500], [20.9323762500, 58.8886050000], [19.8032927500, 61.0455250000], [18.5755950000, 63.1507352500], [17.2554170000, 65.1994855000], [15.8488925000, 67.1870255000], [13.7119532500, 69.8464870000], [12.5543175000, 71.0997810000], [11.3313975000, 72.2862805000], [10.0886037500, 73.3906507500], [8.7953375000, 74.4414232500], [7.4371025000, 75.3975367500], [5.9994025000, 76.2179305000], [4.4511332500, 76.8854387500], [2.7689697500, 77.4501505000], [1.2061115000, 77.8442692500], [0.0000000000, 77.9999980000], [0.0000000000, 0.0000000000]]);
				}
				difference() {
					union() {
						translate(v = [0, 0, -coupler_shoulder_len]) {
							cylinder(d = coupler_shoulder_diam, h = coupler_shoulder_len + coupler_extra);
						}
						translate(v = [0, 0, -(coupler_shoulder_len + coupler_fitting_len)]) {
							cylinder(d = coupler_fitting_diam, h = coupler_fitting_len + delta);
						}
					}
					translate(v = [0, 0, -(coupler_shoulder_len + coupler_fitting_len + delta/2.)]) {
						cylinder(d = coupler_fitting_diam - 2 * wall_th, h = coupler_shoulder_len + coupler_extra + coupler_fitting_len + delta);
					}
				}
			}
			rotate_extrude() {
				polygon(paths = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53]], points = [[0.0000000000, 76.8164905000], [1.1389522500, 76.6434497500], [2.6008587500, 76.2106520000], [4.1696775000, 75.6077430000], [5.6136105000, 74.9243685000], [7.0100182500, 74.0832677500], [8.3295707500, 73.1176145000], [9.5879075000, 72.0659672500], [10.8006680000, 70.9668842500], [11.9781670000, 69.8204310000], [13.1008117500, 68.6175250000], [14.1629352500, 67.3611285000], [15.1588695000, 66.0542042500], [16.5013302500, 64.0747272500], [17.7386167500, 62.0245967500], [18.8841657500, 59.9199870000], [19.9514137500, 57.7770725000], [20.8881275000, 55.7147337500], [21.7432890000, 53.6154222500], [22.5174322500, 51.4847150000], [23.2110912500, 49.3281900000], [23.8368267500, 47.1166965000], [24.3819195000, 44.8821502500], [24.8371872500, 42.6282000000], [25.1934475000, 40.3584950000], [25.4584580000, 38.0609482500], [25.6314267500, 35.7522427500], [25.6956615000, 33.4393735000], [25.6344700000, 31.1293350000], [25.4478207500, 28.8099570000], [25.1436512500, 26.4996990000], [24.7148940000, 24.2101867500], [24.1544812500, 21.9530450000], [23.4498127500, 19.6690520000], [22.6198927500, 17.4229685000], [21.6548137500, 15.2335695000], [20.5446687500, 13.1196300000], [19.7338712500, 11.8210597500], [18.8334232500, 10.5790935000], [17.8594865000, 9.3918880000], [16.8282220000, 8.2576000000], [15.7204262500, 7.1386447500], [14.5570107500, 6.0732802500], [13.3305752500, 5.0854082500], [12.0337200000, 4.1989300000], [10.7178495000, 3.4458067500], [9.3471752500, 2.7878085000], [7.9315142500, 2.2353610000], [6.4806837500, 1.7988900000], [4.9751980000, 1.4758837500], [3.5024120000, 1.2905537500], [1.8985910000, 1.2079662500], [0.0000000000, 1.1931875000], [0.0000000000, 76.8164905000]]);
			}
		}
		translate(v = [0, -100.0000000000, -100.0000000000]) {
			cube(size = 200);
		}
	}
}
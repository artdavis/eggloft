
// Copyright 2017 Arthur Davis (thingiverse.com/artdavis)
// This file is licensed under a Creative Commons Attribution 4.0
// International License.
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
// DEALINGS IN THE SOFTWARE.

// Coupler Shoulder Length
coupler_shoulder_len = 6.0; // [1.0:1.0:25.0]
// Coupler Shoulder Diameter
coupler_shoulder_diam = 18.7; // [10.0:0.2:50.0]
// Fitting Shoulder Length
coupler_fitting_len = 12.0; // [5.0:1.0:25.0]
// Fitting Shoulder Diameter
coupler_fitting_diam = 17.9; // [10.0:0.2:50.0]

/* [Hidden] */
// Special variables for facets/arcs
$fn = 48;

// Incremental offset to make good overlap for CSG operations
delta = 0.1;

// Coupler extension to overlap with egg shell
coupler_extra = 50.0;

// Wall thickness of the fitting
wall_th = 2.0;


rotate(a = [0, 90.0000000000, 0]) {
	difference() {
		difference() {
			union() {
				rotate_extrude(convexity = 10) {
					polygon(paths = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]], points = [[0.0, 0.0], [5.72665976254, 0.787878787879], [8.05038105423, 1.57575757576], [9.80018127265, 2.36363636364], [11.2472643828, 3.15151515152], [12.4972974066, 3.93939393939], [13.6047652817, 4.72727272727], [14.6021984362, 5.51515151515], [15.5108932745, 6.30303030303], [16.3457085347, 7.09090909091], [17.1175079667, 7.87878787879], [17.8345245286, 8.66666666667], [18.5031770294, 9.45454545455], [19.1285862759, 10.2424242424], [19.7149158759, 11.0303030303], [20.2656055159, 11.8181818182], [20.7835355337, 12.6060606061], [21.2711460408, 13.3939393939], [21.7305250773, 14.1818181818], [22.1634751175, 14.9696969697], [22.5715640991, 15.7575757576], [22.9561651671, 16.5454545455], [23.3184880451, 17.3333333333], [23.6596040934, 18.1212121212], [23.9804665411, 18.9090909091], [24.2819269813, 19.696969697], [24.5647489379, 20.4848484848], [24.8296191131, 21.2727272727], [25.0771567804, 22.0606060606], [25.3079216807, 22.8484848485], [25.5224206998, 23.6363636364], [25.7211135462, 24.4242424242], [25.9044176022, 25.2121212121], [26.072712088, 26.0], [26.2263416488, 26.7878787879], [26.3656194555, 27.5757575758], [26.4908298928, 28.3636363636], [26.6022308959, 29.1515151515], [26.7000559829, 29.9393939394], [26.7845160264, 30.7272727273], [26.8558007977, 31.5151515152], [26.9140803113, 32.303030303], [26.9595059942, 33.0909090909], [26.9922116996, 33.8787878788], [27.0123145812, 34.6666666667], [27.0199158429, 35.4545454545], [27.0151013739, 36.2424242424], [26.9979422797, 37.0303030303], [26.9684953169, 37.8181818182], [26.9268032365, 38.6060606061], [26.8728950426, 39.3939393939], [26.8067861681, 40.1818181818], [26.7284785707, 40.9696969697], [26.6379607503, 41.7575757576], [26.5352076876, 42.5454545455], [26.4201807035, 43.3333333333], [26.2928272365, 44.1212121212], [26.1530805355, 44.9090909091], [26.0008592627, 45.696969697], [25.8360670014, 46.4848484848], [25.6585916611, 47.2727272727], [25.46830477, 48.0606060606], [25.2650606441, 48.8484848485], [25.0486954195, 49.6363636364], [24.819025931, 50.4242424242], [24.5758484169, 51.2121212121], [24.3189370276, 52.0], [24.0480421065, 52.7878787879], [23.7628882124, 53.5757575758], [23.4631718379, 54.3636363636], [23.1485587749, 55.1515151515], [22.8186810642, 55.9393939394], [22.4731334524, 56.7272727273], [22.111469262, 57.5151515152], [21.7331955563, 58.303030303], [21.3377674507, 59.0909090909], [20.9245813851, 59.8787878788], [20.4929671158, 60.6666666667], [20.0421781222, 61.4545454545], [19.5713800259, 62.2424242424], [19.0796364944, 63.0303030303], [18.5658919259, 63.8181818182], [18.0289499606, 64.6060606061], [17.4674465095, 65.3939393939], [16.8798154681, 66.1818181818], [16.2642445037, 66.9696969697], [15.6186171137, 67.7575757576], [14.9404352801, 68.5454545455], [14.2267140118, 69.3333333333], [13.4738339769, 70.1212121212], [12.6773295295, 70.9090909091], [11.8315731081, 71.696969697], [10.9292852524, 72.4848484848], [9.96073328705, 73.2727272727], [8.91233085017, 74.0606060606], [7.76396461901, 74.8484848485], [6.4832197059, 75.6363636364], [5.01030931987, 76.4242424242], [3.20274294789, 77.2121212121], [0.0, 78.0], [0.0000000000, 0]]);
				}
				difference() {
					union() {
						translate(v = [0, 0, -coupler_shoulder_len]) {
							cylinder(d = coupler_shoulder_diam, h = coupler_shoulder_len + coupler_extra);
						}
						translate(v = [0, 0, -(coupler_shoulder_len + coupler_fitting_len)]) {
							cylinder(d = coupler_fitting_diam, h = coupler_fitting_len + delta);
						}
					}
					translate(v = [0, 0, -(coupler_shoulder_len + coupler_fitting_len + delta/2.)]) {
						cylinder(d = coupler_fitting_diam - 2 * wall_th, h = coupler_shoulder_len + coupler_extra + coupler_fitting_len + delta);
					}
				}
			}
			rotate_extrude() {
				polygon(paths = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]], points = [[0.0, 2.0], [5.43298490292, 2.74747474747], [7.63754100017, 3.49494949495], [9.29760787405, 4.24242424242], [10.6704815939, 4.9898989899], [11.8564103601, 5.73737373737], [12.9070850108, 6.48484848485], [13.8533677471, 7.23232323232], [14.7154628502, 7.9797979798], [15.5074670714, 8.72727272727], [16.2396870454, 9.47474747475], [16.9199335271, 10.2222222222], [17.5542961561, 10.9696969697], [18.1476331336, 11.7171717172], [18.7038945489, 12.4646464646], [19.2263436946, 13.2121212121], [19.7177131986, 13.9595959596], [20.1803180387, 14.7070707071], [20.6161391759, 15.4545454545], [21.02688665, 16.202020202], [21.4140479914, 16.9494949495], [21.7789259277, 17.696969697], [22.1226681454, 18.4444444444], [22.446291063, 19.1919191919], [22.7506990262, 19.9393939394], [23.0366999567, 20.6868686869], [23.3050182231, 21.4343434343], [23.5563053124, 22.1818181818], [23.7911487403, 22.9292929293], [24.0100795432, 23.6767676768], [24.2135786127, 24.4242424242], [24.4020820823, 25.1717171717], [24.5759859303, 25.9191919192], [24.7356499297, 26.6666666667], [24.8814010515, 27.4141414141], [25.0135364065, 28.1616161616], [25.1323257958, 28.9090909091], [25.2380139269, 29.6565656566], [25.3308223427, 30.404040404], [25.410951102, 31.1515151515], [25.478580244, 31.898989899], [25.5338710646, 32.6464646465], [25.5769672253, 33.3939393939], [25.607995715, 34.1414141414], [25.6270676796, 34.8888888889], [25.634279133, 35.6363636364], [25.6297115599, 36.3838383838], [25.6134324192, 37.1313131313], [25.585495557, 37.8787878788], [25.545941532, 38.6262626263], [25.4947978609, 39.3737373737], [25.4320791851, 40.1212121212], [25.357787362, 40.8686868687], [25.2719114811, 41.6161616162], [25.1744278062, 42.3636363636], [25.0652996418, 43.1111111111], [24.9444771218, 43.8585858586], [24.8118969183, 44.6060606061], [24.6674818646, 45.3535353535], [24.5111404885, 46.101010101], [24.3427664477, 46.8484848485], [24.1622378587, 47.595959596], [23.9694165085, 48.3434343434], [23.7641469364, 49.0909090909], [23.5462553704, 49.8383838384], [23.3155484981, 50.5858585859], [23.0718120518, 51.3333333333], [22.8148091779, 52.0808080808], [22.5442785605, 52.8282828283], [22.2599322565, 53.5757575758], [21.9614531967, 54.3232323232], [21.6484922916, 55.0707070707], [21.3206650702, 55.8181818182], [20.9775477614, 56.5656565657], [20.6186727072, 57.3131313131], [20.2435229661, 58.0606060606], [19.8515259294, 58.8080808081], [19.4420457252, 59.5555555556], [19.0143741159, 60.303030303], [18.5677195117, 61.0505050505], [18.1011935973, 61.797979798], [17.6137949041, 62.5454545455], [17.1043884241, 63.2929292929], [16.5716800218, 64.0404040404], [16.0141839056, 64.7878787879], [15.430180683, 65.5353535354], [14.8176623899, 66.2828282828], [14.1742591119, 67.0303030303], [13.4971389342, 67.7777777778], [12.7828681319, 68.5252525253], [12.0272100664, 69.2727272727], [11.2248257692, 70.0202020202], [10.3688090856, 70.7676767677], [9.44992645182, 71.5151515152], [8.45528824247, 72.2626262626], [7.36581258726, 73.0101010101], [6.15074690047, 73.7575757576], [4.75337038039, 74.5050505051], [3.0384997198, 75.2525252525], [0.0, 76.0], [0.0000000000, 2.0000000000]]);
			}
		}
		translate(v = [0, -100.0000000000, -100.0000000000]) {
			cube(size = 200);
		}
	}
}